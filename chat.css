:root{
 --gold:#caa24f;
 --bubble-in:#ffffff;
 --bubble-out:#b5e7a4;
 --bg:url("https://i.pinimg.com/736x/de/d8/b8/ded8b80d7a4285c58c5c8554f718a445.jpg");
}
*{box-sizing:border-box}

html, body{
 margin:0;
 height:100%;
 overflow:hidden;
 overscroll-behavior:none;
 background:
 linear-gradient(rgba(0,0,0,.25), rgba(0,0,0,.25)),
 var(--bg) center/cover no-repeat fixed;
}

/* страховка от полосы */
body::before{
 content:"";
 position:fixed;
 inset:-200px0;
 z-index:-2;
 background:
 linear-gradient(rgba(0,0,0,.25), rgba(0,0,0,.25)),
 var(--bg) center/cover no-repeat fixed;
}

.chat-app{
 height:100svh;
 height:100dvh;
 min-height:100vh;
 display:flex;
 flex-direction:column;
 padding-top:env(safe-area-inset-top);
 padding-bottom:env(safe-area-inset-bottom);
 background:
 linear-gradient(rgba(0,0,0,.25), rgba(0,0,0,.25)),
 var(--bg) center/cover no-repeat fixed;
}

/* верхняя панель */
.topbar{
 height:52px;
 display:flex;
 align-items:center;
 justify-content:space-between;
 padding:16px8px8px;
 background:rgba(0,0,0,.35);
}
.top-title{
 flex:1;
 text-align:center;
 font-weight:700;
 font-size:16px;
 color:#fff;
}
.top-btn{
 width:42px;
 height:34px;
 border-radius:8px;
 border:2px solid var(--gold);
 background:#1b1e25;
 color:#fff;
 font-size:18px;
}

/* меню */
.menu{
 position:fixed;
 top:70px;
 right:8px;
 width:min(88vw,300px);
 background:rgba(20,22,27,.92);
 border:1px solid #333;
 border-radius:10px;
 padding:10px;
 z-index:9999;
 box-shadow:010px30px rgba(0,0,0,.4);
}
.menu.hidden{display:none}

.menu-section{ font-size:12px; color:#ccc; margin:6px0; }
.menu-list button{
 width:100%;
 margin:6px0;
 padding:10px;
 border-radius:10px;
 border:1px solid #333;
 background:#242833;
 color:#fff;
 font-size:15px;
 text-align:left;
}
.menu-list button.active{ border-color:#666; }

.dm-new{
 display:flex;
 gap:6px;
 margin:6px0;
}
.dm-new input{
 flex:1;
 padding:8px;
 border-radius:8px;
 border:1px solid #333;
 background:#111;
 color:#fff;
 font-size:14px;
}
.dm-new button{
 padding:8px10px;
 border-radius:8px;
 border:1px solid #333;
 background:#111;
 color:#fff;
}

/* окно сообщений */
.messages{
 flex:1;
 overflow:auto;
 padding:10px;
 margin:8px;
 border:2px solid var(--gold);
 border-radius:12px;
 background:rgba(0,0,0,.28);
 backdrop-filter: blur(6px);
 -webkit-backdrop-filter: blur(6px);
 display:flex;
 flex-direction:column;
 gap:12px;
 user-select:none;
}

/* сообщения */
.msg{ display:flex; max-width:90%; }
.msg.incoming{ align-self:flex-start; }
.msg.outgoing{ align-self:flex-end; }

.bubble{
 padding:20px24px;
 border-radius:6px;
 font-size:16px;
 line-height:1.35;
 color:#000;
 background:var(--bubble-in);
 border:1px solid rgba(0,0,0,.08);
 user-select:none;
}
.msg.outgoing .bubble{ background:var(--bubble-out); }

.meta{
 font-size:11px;
 color:#777;
 margin-top:2px;
}

/* поле ввода */
.send-form{
 display:flex;
 gap:6px;
 padding:8px;
 padding-bottom:calc(8px + env(safe-area-inset-bottom));
 background:rgba(0,0,0,.35);
}
.send-form input{
 flex:1;
 padding:10px;
 border-radius:10px;
 border:2px solid var(--gold);
 background:#111;
 color:#fff;
 font-size:14px;
}
.send-btn{
 padding:012px;
 border-radius:10px;
 border:2px solid var(--gold);
 background:#1b1e25;
 color:#fff;
 font-weight:700;
}

/* меню действий */
.msg-menu{
 position:fixed;
 z-index:20000;
 background:#1b1e25;
 border:1px solid #333;
 border-radius:10px;
 display:flex;
 flex-direction:column;
 min-width:160px;
 box-shadow:010px30px rgba(0,0,0,.4);
}
.msg-menu.hidden{display:none}
.msg-menu button{
 padding:10px;
 border:0;
 background:transparent;
 color:#fff;
 text-align:left;
}
.msg-menu button:hover{background:rgba(255,255,255,.08)}
